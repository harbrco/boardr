@function decimal-round ($number, $digits: 0, $mode: round) {
	$n: 1;
	// $number must be a number
	@if type-of($number) != number {
		@warn '#{ $number } is not a number.';
		@return $number;
	}
	// $digits must be a unitless number
	@if type-of($digits) != number {
		@warn '#{ $digits } is not a number.';
		@return $number;
	} @else if not unitless($digits) {
		@warn '#{ $digits } has a unit.';
		@return $number;
	}
	@for $i from 1 through $digits {
		$n: $n * 10;
	}
	@if $mode == round {
		@return round($number * $n) / $n;
	} @else if $mode == ceil {
		@return ceil($number * $n) / $n;
	} @else if $mode == floor {
		@return floor($number * $n) / $n;
	} @else {
		@warn '#{ $mode } is undefined keyword.';
		@return $number;
	}
}

@function decimal-ceil ($number, $digits: 0) {
	@return decimal-round($number, $digits, ceil);
}

@function decimal-floor ($number, $digits: 0) {
	@return decimal-round($number, $digits, floor);
}



$baseFS: 16px;  // <-- Change this if needed

// Change the gutter values based on grid designs
$gutterBase: 1.6%;
$gutterNone: 0%;
$gutterMed: 5%;
$gutterLarge: 7%;


.gutter {
	$gutter: $gutterBase;

	@for $cols from 2 through 12 {
		$span: $cols;
		@while $span > 0 {
			@if ($span == $cols) {
				> .span_#{$span}_of_#{$cols} { width: 100%; }
			} @else {
				> .span_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
			}
			$span: $span - 1;
		}
	}

	> .col {
		margin-left: $gutter;
	}

	&.hasRows {
		.col {
			margin-bottom: $gutter;
		}
	}
}

.gutter--none {
	$gutter: $gutterNone;

	@for $cols from 2 through 12 {
		$span: $cols;
		@while $span > 0 {
			@if ($span == $cols) {
				> .span_#{$span}_of_#{$cols} { width: 100%; }
			} @else {
				> .span_#{$span}_of_#{$cols} { width: decimal-round((100 * $span/$cols), 2, 'floor') * 1%; }
			}
			$span: $span - 1;
		}
	}

	> .col {
		margin-left: 0;
	}

	&.hasRows {
		.col {
			margin-bottom: $gutter;
		}
	}
}

.gutter--l {
	$gutter: $gutterLarge;

	@for $cols from 2 through 12 {
		$span: $cols;
		@while $span > 0 {
			@if ($span == $cols) {
				> .span_#{$span}_of_#{$cols} { width: 100%; }
			} @else {
				> .span_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
			}
			$span: $span - 1;
		}
	}

	> .col {
		margin-left: $gutter;
	}

	&.hasRows {
		.col {
			margin-bottom: $gutter;
		}
	}
}
.gutter--m {
	$gutter: $gutterMed;

	@for $cols from 2 through 12 {
		$span: $cols;
		@while $span > 0 {
			@if ($span == $cols) {
				> .span_#{$span}_of_#{$cols} { width: 100%; }
			} @else {
				> .span_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
			}
			$span: $span - 1;
		}
	}

	> .col {
		margin-left: $gutter;
	}

	&.hasRows {
		.col {
			margin-bottom: $gutter;
		}
	}
}



.grid-group {
	clear: both;
	//padding: 0;
	margin: 0;
	zoom: 1;
	font-size: 0;
	zoom:1; /* For IE 6/7 */

	&:before,
	&:after { content:""; display:table; }
	&:after { clear:both;}

	&.row_of_2 .col:nth-child(2n+1) {
		margin-left: 0;
	}
	&.row_of_3 .col:nth-child(3n+1) {
		margin-left: 0;
	}
	&.row_of_4 .col:nth-child(4n+1) {
		margin-left: 0;
	}
	&.row_of_5 .col:nth-child(5n+1) {
		margin-left: 0;
	}
	&.row_of_6 .col:nth-child(6n+1) {
		margin-left: 0;
	}
}

.col {
	font-size: $baseFS;
	display: inline-block;
	vertical-align: top;
	//padding: 0;
	margin: 0;

	&:first-child {
		margin-left: 0;
	}
}

.vAlign-mid {
	vertical-align: middle;
}
.vAlign-bot {
	vertical-align: bottom;
}

// For responsive re-structuring, refer to: http://www.responsivegridsystem.com/going-further/



@media only screen and (max-width:900px) {
	//Here, we reset the variables based on breakpoint.
	//Change them here if you want gutter size to change based on tablet!
	$gutterBase: 1.6%;
	$gutterNone: 0%;
	$gutterMed: 5%;
	$gutterLarge: 7%;


	.gutter {
		$gutter: $gutterBase;

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.tablet_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.tablet_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
				}
				$span: $span - 1;
			}
		}

		.col {
			margin-left: $gutter;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--tablet {
			.col {
				margin-bottom: $gutter;
			}
		}

		.tablet_full_span {
			width: 100%;
		}
	}

	.gutter--none {
		$gutter: $gutterNone;

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.tablet_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.tablet_#{$span}_of_#{$cols} { width: decimal-round((100 * $span/$cols), 2, 'floor') * 1%; }
				}
				$span: $span - 1;
			}
		}

		.col {
			margin-left: $gutter;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--tablet {
			.col {
				margin-bottom: $gutter;
			}
		}
	}

	.gutter--l {
		$gutter: $gutterLarge;

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.tablet_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.tablet_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
				}
				$span: $span - 1;
			}
		}

		.col {
			margin-left: $gutter;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--tablet {
			.col {
				margin-bottom: $gutter;
			}
		}
	}
	.gutter--m {
		$gutter: $gutterMed;

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.tablet_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.tablet_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
				}
				$span: $span - 1;
			}
		}

		.col {
			margin-left: $gutter;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--tablet {
			.col {
				margin-bottom: $gutter;
			}
		}
	}



	.grid-group {
		&.row_of_2--tablet .col:nth-child(2n+1) { margin-left: 0 !important; }
		&.row_of_3--tablet .col:nth-child(3n+1) { margin-left: 0 !important; }
		&.row_of_4--tablet .col:nth-child(4n+1) { margin-left: 0 !important; }
		&.row_of_5--tablet .col:nth-child(5n+1) { margin-left: 0 !important; }
		&.row_of_6--tablet .col:nth-child(6n+1) { margin-left: 0 !important; }

		&.row_of_2 .col:nth-child(2n+1) { margin-left: 0 !important; }
		&.row_of_3 .col:nth-child(3n+1) { margin-left: 0 !important; }
		&.row_of_4 .col:nth-child(4n+1) { margin-left: 0 !important; }
		&.row_of_5 .col:nth-child(5n+1) { margin-left: 0 !important; }
		&.row_of_6 .col:nth-child(6n+1) { margin-left: 0 !important; }
	}

}

@media only screen and (max-width:580px) {
	//Here, we reset the variables based on breakpoint.
	//Change them here if you want gutter size to change based on mobile!
	$gutterBase: 1.6%;
	$gutterNone: 0%;
	$gutterMed: 5%;
	$gutterLarge: 7%;

	.gutter {
		$gutter: $gutterBase;
		.col {width: 100%;}

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.mobile_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.mobile_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
				}
				$span: $span - 1;
			}
		}

		.col {
			margin-left: $gutter;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--mobile {
			.col {
				margin-bottom: $gutter;
			}
		}
	}

	.gutter--none {
		$gutter: $gutterNone;
		.col {width: 100%;}

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.mobile_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.mobile_#{$span}_of_#{$cols} { width: decimal-round((100 * $span/$cols), 2, 'floor') * 1%; }
				}
				$span: $span - 1;
			}
		}


		.col {
			margin-left: 0;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--mobile {
			.col {
				margin-bottom: $gutter;
			}
		}
	}

	.gutter--l {
		$gutter: $gutterLarge;
		.col {width: 100%;}

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.mobile_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.mobile_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
				}
				$span: $span - 1;
			}
		}

		.col {
			margin-left: $gutter;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--mobile {
			.col {
				margin-bottom: $gutter;
			}
		}
	}
	.gutter--m {
		$gutter: $gutterMed;
		.col {width: 100%;}

		&.row_of_2 .col { margin-left: $gutter !important; }
		&.row_of_3 .col { margin-left: $gutter !important; }
		&.row_of_4 .col { margin-left: $gutter !important; }
		&.row_of_5 .col { margin-left: $gutter !important; }
		&.row_of_6 .col { margin-left: $gutter !important; }

		@for $cols from 2 through 12 {
			$span: $cols;
			@while $span > 0 {
				@if ($span == $cols) {
					.mobile_#{$span}_of_#{$cols} { width: 100%; }
				} @else {
					.mobile_#{$span}_of_#{$cols} { width: decimal-round( (((100 - ($gutter * ($cols - 1))) / $cols) * $span) + (($span - 1) * $gutter) , 2, 'floor'); }
				}
				$span: $span - 1;
			}
		}

		.col {
			margin-left: $gutter;

			&:first-child {
				margin-left: 0;
			}
		}

		&.hasRows {
			.col {
				margin-bottom: $gutter;
			}
		}

		&.hasRows--mobile {
			.col {
				margin-bottom: $gutter;
			}
		}
	}

	.grid-group {
		&.row_of_2--tablet .col:nth-child(2n+1) { margin-left: 0 !important; }
		&.row_of_3--tablet .col:nth-child(3n+1) { margin-left: 0 !important; }
		&.row_of_4--tablet .col:nth-child(4n+1) { margin-left: 0 !important; }
		&.row_of_5--tablet .col:nth-child(5n+1) { margin-left: 0 !important; }
		&.row_of_6--tablet .col:nth-child(6n+1) { margin-left: 0 !important; }

		&.row_of_2 .col:nth-child(2n+1) { margin-left: 0 !important; }
		&.row_of_3 .col:nth-child(3n+1) { margin-left: 0 !important; }
		&.row_of_4 .col:nth-child(4n+1) { margin-left: 0 !important; }
		&.row_of_5 .col:nth-child(5n+1) { margin-left: 0 !important; }
		&.row_of_6 .col:nth-child(6n+1) { margin-left: 0 !important; }
	}
}